(function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n,r,i=[];n=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var o=0,a=n.length;a>o;o++)r=n[o],".."===r?i.pop():"."!==r&&""!==r&&i.push(r);return i.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")},a=function(t){return function(n){var r=o(t),a=i(r,n);return e.require(a)}},s=function(e,t){var r={id:e,exports:{}};t(r.exports,a(e),r);var i=n[e]=r.exports;return i},u=function(e){var o=i(e,".");if(r(n,o))return n[o];if(r(t,o))return s(o,t[o]);var a=i(o,"./index");if(r(n,a))return n[a];if(r(t,a))return s(a,t[a]);throw Error('Cannot find module "'+e+'"')},c=function(e,n){if("object"==typeof e)for(var i in e)r(e,i)&&(t[i]=e[i]);else t[e]=n};e.require=u,e.require.define=c,e.require.register=c,e.require.brunch=!0}})(),function(){angular.module("scroll",[]).value("$anchorScroll",angular.noop),angular.module("app",["ui","ngCookies","ngResource","partials","app.controllers","ui.state"]).config(["$stateProvider","$urlRouterProvider"].concat(function(e,t){return e.state("about",{url:"/about",templateUrl:"/partials/about.html"}).state("hack",{url:"/{hackId}",templateUrl:"/partials/hack.html",controller:"HackFolderCtrl"}).state("hack.doc",{url:"/{docId}"}),t.otherwise("/hackfoldr")})).run(["$rootScope","$state","$stateParams"].concat(function(e,t,n){return e.$state=t,e.$stateParam=n}))}.call(this),function(){function e(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}function t(e,t){for(var n=-1,r=t.length>>>0;r>++n;)if(e===t[n]&&n in t)return!0;return!1}var n=[].slice,r="".replace;angular.module("app.controllers",["ui.state"]).controller({AppCtrl:["$scope","$location","$resource","$rootScope"].concat(function(e,t){return e.$location=t,e.$watch("$location.path()",function(t){return t||(t="/"),e.activeNavId=t,e}),e.getClass=function(t){return e.activeNavId.substring(0,t.length===t)?"active":""}})}).controller({HackFolderCtrl:["$scope","$state","HackFolder"].concat(function(t,n,r){var i;return e(t,{hasViewMode:function(e){return e.match(/g(doc|present|draw)/)},sortableOptions:{update:function(){return"undefined"!=typeof console&&null!==console?console.log("notyetupdated"):void 0}},iframes:r.iframes,docs:r.docs,tree:r.tree,activate:r.activate,HackFolder:r,iframeCallback:function(e){return function(n){return t.$apply(function(){return"undefined"!=typeof console&&null!==console&&console.log("iframecb",n,e),e.noiframe="fail"===n?!0:!1,"unsure"===n?e.iframeunsure=!0:void 0})}},debug:function(e){return"undefined"!=typeof console&&null!==console?console.log(e,this):void 0},reload:function(e){return r.getIndex(e,!0,function(){})}}),t.$watch("hackId",function(e){return r.getIndex(e,!1,function(){var e,i;return t.$watch("docId",function(e){return e?r.activate(e):void 0}),!t.docId&&(e=null!=(i=r.docs[0])?i.id:void 0)?n.transitionTo("hack.doc",{docId:e,hackId:t.hackId}):void 0})}),t.hackId=(i=n.params.hackId)?i:"s8r4l008sk",t.$watch("$state.params.docId",function(e){return e?t.docId=encodeURIComponent(encodeURIComponent(e)):void 0})})}).directive("resize",["$window"].concat(function(e){return function(t){return t.width=e.innerWidth,t.height=e.innerHeight,angular.element(e).bind("resize",function(){return t.$apply(function(){return t.width=e.innerWidth,t.height=e.innerHeight})})}})).directive("ngxIframe",["$parse"].concat(function(e){return{link:function(t,n,r){var i,o,a;return i=e(r.ngxIframe)(t),o=function(e,t){var n;return n=!function(){try{return"about:blank"==e.location}catch(t){}}(),t&&$.browser.mozilla?i("unsure"):i(n?"ok":"fail")},$(n).load(function(){return clearTimeout(a),o(this.contentWindow,!0)}),a=setTimeout(function(){return o(n[0].contentWindow)},1500)}}})).directive("ngxNoclick",function(){return function(e,t){return $(t).click(function(e){return e.preventDefault(),!1})}}).directive("ngxFinal",function(){return function(e,t){return $(t).click(function(e){return e.stopPropagation()})}}).factory({HackFolder:["$http"].concat(function(i){var o,a,s,u,c;return o={},a=[],s=[],c={iframes:o,docs:a,tree:s,activate:function(e,n){function r(e){return e.id}var i,u,c,l,f,p,h,d,g,m,v;for(null==n&&(n=!1),u=function(){var t,n,r,o=[];for(t=0,r=(n=a).length;r>t;++t)i=n[t],i.id===e&&o.push(i);return o}()[0],c=u.type,l=0,p=(f=s).length;p>l;++l)h=f[l],(d=null!=h?null!=(g=h.children)?g.map(r):void 0:void 0)&&t(e,d)&&(h.expand=!0);return m=n?"edit":"view",v=function(){var t;switch(t=[c],!1){case"gdoc"!==t[0]:return"https://docs.google.com/document/d/"+e+"/"+m;case"gsheet"!==t[0]:return"https://docs.google.com/spreadsheet/ccc?key="+e;case"gpresent"!==t[0]:return"https://docs.google.com/presentation/d/"+e+"/"+m;case"gdraw"!==t[0]:return"https://docs.google.com/drawings/d/"+e+"/"+m;case"gsheet"!==t[0]:return"https://docs.google.com/spreadsheet/ccc?key="+e;case"hackpad"!==t[0]:return"https://hackpad.com/"+e;case"ethercalc"!==t[0]:return"https://ethercalc.org/"+e;case"url"!==t[0]:return decodeURIComponent(decodeURIComponent(e));default:return""}}(),(d=o[e])?(d.src=v,d.mode=m,d):o[e]={src:v,doc:u,mode:m}},getIndex:function(t,o,l){return u!==t||o?i.get("https://www.ethercalc.org/_/"+t+"/csv").success(function(i){function o(){try{return JSON.parse(null!=k?k:"{}")}catch(e){}}function f(){var e;switch(e=[w],!1){case void 0!==e[0]:return d||C&&(d=C,C=null),{title:C,type:"dummy",id:"dummy"};case!(A=/^https?:\/\/www\.ethercalc\.(?:com|org)\/(.*)/.exec(e[0])):return{type:"ethercalc",id:A[1]};case!(A=/https:\/\/docs\.google\.com\/document\/(?:d\/)?([^\/]+)\//.exec(e[0])):return{type:"gdoc",id:A[1]};case!(A=/https:\/\/docs\.google\.com\/spreadsheet\/ccc\?key=([^\/?&]+)/.exec(e[0])):return{type:"gsheet",id:A[1]};case!(A=/https:\/\/docs\.google\.com\/drawings\/(?:d\/)?([^\/]+)\//.exec(e[0])):return{type:"gdraw",id:A[1]};case!(A=/https:\/\/docs\.google\.com\/presentation\/(?:d\/)?([^\/]+)\//.exec(e[0])):return{type:"gpresent",id:A[1]};case!(A=/https?:\/\/hackpad\.com\/(?:.*?-)?([\w]+)(\#.*)?$/.exec(e[0])):return{type:"hackpad",id:A[1]};case!(A=/^(https?:\/\/[^\/]+)/.exec(e[0])):return{type:"url",id:encodeURIComponent(encodeURIComponent(w)),icon:"http://g.etfv.co/"+A[1]};default:return"undefined"!=typeof console&&null!==console?console.log("unrecognized",w):void 0}}function p(e){return e.length}function h(e){var t,r,i,o,a;return t=e.match(/^(.*?)(?::(.*))?$/),r=t[0],i=t[1],o=t[2],a=n.call(t,3),{content:i,"class":null!=o?o:"warning"}}var d,g,m,v,y,$,b,x,w,C,k,T,S,E,j,N,A,M,O,P,D,H,L,q;for(u=t,a.length=0,m=[],v=0,$=(y=i.split(/\n/)).length;$>v;++v)b=y[v],b&&(x=b.split(/,/),w=x[0],C=x[1],k=x[2],T=x[3],S=n.call(x,4),C=r.call(C,/^"|"$/g,""),k&&(k=r.call(k,/^"|"$/g,"")),k&&(k=k.replace(/""/g,'"')),T&&(T=r.call(T,/^"|"$/g,"")),x=w.match(/^"?(\s*)(\S+?)?"?$/),E=x[0],j=x[1],w=x[2],N=e({url:w,title:C,indent:j.length,opts:o()},f()),"dummy"!==N.type||null!=(x=N.title)&&x.length?m.push(e(e({icon:"img/"+N.type+".png"},N),{tags:(null!=(x=null!=(M=N.opts)?M.tags:void 0)?x:[]).concat((null!=(x=null!=T?T.split(","):void 0)?x:[]).filter(p).map(h))})):m.push(null));for(g=m,a.splice.apply(a,[0,a.length].concat(n.call(g.filter(function(e){return null!=e})))),O=0,m=[],v=0,$=(y=a).length;$>v;++v)D=v,N=y[v],D>0&&N.indent?(H=a[O],L=null!=(x=H.children)?x:H.children=[],L.push(N),m.push(null)):(O&&(q=a[O],q.children&&(q.expand=null!=(x=null!=(M=q.opts)?M.expand:void 0)?x:5>q.children.length)),O=D,m.push(N));return P=m,s.splice.apply(s,[0,s.length].concat(n.call(P.filter(function(e){return null!=e})))),c.folderTitle=d,l(a)}):l(a)}}})})}.call(this),function(){angular.element(document).ready(function(){return angular.bootstrap(document,["app"])})}.call(this);