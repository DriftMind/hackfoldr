(function(){"use strict";var t="undefined"!=typeof window?window:global;if(typeof t.require!="function"){var e={},n={},r=function(t,e){return{}.hasOwnProperty.call(t,e)},o=function(t,e){var n,r,o=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var i=0,a=n.length;a>i;i++)r=n[i],".."===r?o.pop():"."!==r&&""!==r&&o.push(r);return o.join("/")},i=function(t){return t.split("/").slice(0,-1).join("/")},a=function(e){return function(n){var r=i(e),a=o(r,n);return t.require(a)}},l=function(t,e){var r={id:t,exports:{}};e(r.exports,a(t),r);var o=n[t]=r.exports;return o},s=function(t){var i=o(t,".");if(r(n,i))return n[i];if(r(e,i))return l(i,e[i]);var a=o(i,"./index");if(r(n,a))return n[a];if(r(e,a))return l(a,e[a]);throw Error('Cannot find module "'+t+'"')},c=function(t,n){if("object"==typeof t)for(var o in t)r(t,o)&&(e[o]=t[o]);else e[t]=n};t.require=s,t.require.define=c,t.require.register=c,t.require.brunch=!0}})(),function(){angular.module("scroll",[]).value("$anchorScroll",angular.noop),angular.module("app",["ui","partials","app.controllers","ui.state","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider","$locationProvider"].concat(function(t,e,n){return t.state("about",{url:"/about",templateUrl:"/partials/about.html"}).state("hack",{url:"/{hackId}",templateUrl:"/partials/hack.html",controller:"HackFolderCtrl"}).state("hack.doc",{url:"/{docId}"}),e.otherwise("/hackfoldr"),n.html5Mode(!0)})).run(["$rootScope","$state","$stateParams","$location"].concat(function(t,e,n,r){return t.$state=e,t.$stateParam=n,t.go=function(t){return r.path(t)}}))}.call(this),function(){function t(t,e){var n={}.hasOwnProperty;for(var r in e)n.call(e,r)&&(t[r]=e[r]);return t}function e(t,e){for(var n=-1,r=e.length>>>0;++n<r;)if(t===e[n]&&n in e)return!0;return!1}var n=[].slice,r="".replace;angular.module("app.controllers",["ui.state"]).controller({AppCtrl:["$scope","$location","$rootScope","$timeout"].concat(function(t,e,n,r){return t.$location=e,t.$watch("$location.path()",function(e){return e||(e="/"),t.activeNavId=e,t}),t.getClass=function(e){return t.activeNavId.substring(0,e.length===e)?"active":""},r(function(){return n.hideGithubRibbon=!0},1e4)})}).controller({HackFolderCtrl:["$scope","$state","HackFolder"].concat(function(e,n,r){var o;return t(e,{hasViewMode:function(t){return t.match(/g(doc|present|draw)/)},sortableOptions:{update:function(){return"undefined"!=typeof console&&null!==console?console.log("notyetupdated"):void 0}},iframes:r.iframes,docs:r.docs,tree:r.tree,godoc:function(t){return e.go("/"+e.hackId+"/"+decodeURIComponent(t.id))},open:function(t){return window.open(t.url,t.id),!1},activate:r.activate,HackFolder:r,iframeCallback:function(t){return function(n){return e.$apply(function(){return"undefined"!=typeof console&&null!==console&&console.log("iframecb",n,t),t.noiframe="fail"===n?!0:!1,"unsure"===n?t.iframeunsure=!0:void 0})}},debug:function(t){return"undefined"!=typeof console&&null!==console?console.log(t,this):void 0},reload:function(t){return r.getIndex(t,!0,function(){})}}),e.$watch("hackId",function(t){return r.getIndex(t,!1,function(){var t,o;return e.$watch("docId",function(t){return t?r.activate(t):void 0}),!e.docId&&(t=(o=r.docs[0])!=null?o.id:void 0)?n.transitionTo("hack.doc",{docId:t,hackId:e.hackId}):void 0})}),e.hackId=(o=n.params.hackId)?o:"hackfoldr",e.$watch("$state.params.docId",function(t){return t?e.docId=encodeURIComponent(encodeURIComponent(t)):void 0})})}).directive("resize",["$window"].concat(function(t){return function(e,n){var r;return r=function(){return e.width=t.innerWidth,e.height=t.innerHeight,e.contentHeight=t.innerHeight-$(n).offset().top},angular.element(t).bind("resize",function(){return e.$apply(r)}),r()}})).directive("ngxIframe",["$parse"].concat(function(t){return{link:function(e,n,r){var o,i,a;return o=t(r.ngxIframe)(e),i=function(t,e){var n;return n=!function(){try{return t.location=="about:blank"}catch(e){}}(),e&&$.browser.mozilla?o("unsure"):o(n?"ok":"fail")},$(n).load(function(){return clearTimeout(a),i(this.contentWindow,!0)}),a=setTimeout(function(){return i(n[0].contentWindow)},5e3)}}})).directive("ngxNoclick",function(){return function(t,e){return $(e).click(function(t){return t.preventDefault(),!1})}}).directive("ngxClickMeta",["$parse"].concat(function(t){return{link:function(e,n,r){var o;return o=t(r.ngxClickMeta),$(n).click(function(t){return t.metaKey&&!o(e)?(t.preventDefault(),!1):void 0})}}})).directive("ngxFinal",function(){return function(t,e){return $(e).click(function(t){return t.stopPropagation()})}}).factory({HackFolder:["$http"].concat(function(o){var i,a,l,s,c;return i={},a=[],l=[],c={iframes:i,docs:a,tree:l,activate:function(t,n){function r(t){return t.id}var o,s,c,u,p,d,f,h,g,m,v;for(null==n&&(n=!1),s=function(){var e,n,r,i=[];for(e=0,r=(n=a).length;r>e;++e)o=n[e],o.id===t&&i.push(o);return i}()[0],c=s.type,u=0,d=(p=l).length;d>u;++u)f=p[u],(h=null!=f?(g=f.children)!=null?g.map(r):void 0:void 0)&&e(t,h)&&(f.expand=!0);return m=n?"edit":"view",v=function(){var e;switch(e=[c],!1){case"gdoc"!==e[0]:return"https://docs.google.com/document/d/"+t+"/"+m+"?pli=1&overridemobile=true";case"gsheet"!==e[0]:return"https://docs.google.com/spreadsheet/ccc?key="+t;case"gpresent"!==e[0]:return"https://docs.google.com/presentation/d/"+t+"/"+m;case"gdraw"!==e[0]:return"https://docs.google.com/drawings/d/"+t+"/"+m;case"gsheet"!==e[0]:return"https://docs.google.com/spreadsheet/ccc?key="+t;case"hackpad"!==e[0]:return"https://"+((e=s.site)!=null?e:"")+"hackpad.com/"+t;case"ethercalc"!==e[0]:return"https://ethercalc.org/"+t;case"url"!==e[0]:return decodeURIComponent(decodeURIComponent(t));default:return""}}(),s.hashtag&&(v+=s.hashtag),(h=i[t])?(h.src=v,h.mode=m,h):i[t]={src:v,doc:s,mode:m}},getIndex:function(e,i,u){return s!==e||i?o.get("https://www.ethercalc.org/_/"+e+"/csv").success(function(o){function i(){try{return JSON.parse(null!=C?C:"{}")}catch(t){}}function p(){var t;switch(t=[w],!1){case void 0!==t[0]:return h||k&&(h=k,k=null),{title:k,type:"dummy",id:"dummy"};case!(D=/^https?:\/\/www\.ethercalc\.(?:com|org)\/(.*)/.exec(t[0])):return{type:"ethercalc",id:D[1]};case!(D=/https:\/\/docs\.google\.com\/document\/(?:d\/)?([^\/]+)\//.exec(t[0])):return{type:"gdoc",id:D[1]};case!(D=/https:\/\/docs\.google\.com\/spreadsheet\/ccc\?key=([^\/?&]+)/.exec(t[0])):return{type:"gsheet",id:D[1]};case!(D=/https:\/\/docs\.google\.com\/drawings\/(?:d\/)?([^\/]+)\//.exec(t[0])):return{type:"gdraw",id:D[1]};case!(D=/https:\/\/docs\.google\.com\/presentation\/(?:d\/)?([^\/]+)\//.exec(t[0])):return{type:"gpresent",id:D[1]};case!(D=/https?:\/\/(\w+\.)?hackpad\.com\/(?:.*?-)?([\w]+)(\#.*)?$/.exec(t[0])):return{type:"hackpad",site:D[1],id:D[2]};case!(D=/^(https?:\/\/[^\/]+)/.exec(t[0])):return{type:"url",id:encodeURIComponent(encodeURIComponent(w)),icon:"http://g.etfv.co/"+D[1]};default:return"undefined"!=typeof console&&null!==console?console.log("unrecognized",w):void 0}}function d(t){return t.length}function f(t){var e,r,o,i,a;return e=t.match(/^(.*?)(?::(.*))?$/),r=e[0],o=e[1],i=e[2],a=n.call(e,3),{content:o,"class":null!=i?i:"warning"}}var h,g,m,v,$,b,x,y,w,k,C,E,P,O,T,S,_,D,A,j,M,U,I,q;for(s=e,a.length=0,m=[],v=0,b=($=o.split(/\n/)).length;b>v;++v)x=$[v],x&&(y=x.split(/,/),w=y[0],k=y[1],C=y[2],E=y[3],P=n.call(y,4),k=r.call(k,/^"|"$/g,""),C&&(C=r.call(C,/^"|"$/g,"")),C&&(C=C.replace(/""/g,'"')),E&&(E=r.call(E,/^"|"$/g,"")),y=w.match(/^"?(\s*)(\S+?)?(#\S+)?"?$/),O=y[0],T=y[1],w=y[2],S=y[3],_=t({hashtag:S,url:w,title:k,indent:T.length,opts:i()},p()),_.type!=="dummy"||(y=_.title)!=null&&y.length?m.push(t(t({icon:"/img/"+_.type+".png"},_),{tags:((y=(A=_.opts)!=null?A.tags:void 0)!=null?y:[]).concat(((y=null!=E?E.split(","):void 0)!=null?y:[]).filter(d).map(f))})):m.push(null));for(g=m,a.splice.apply(a,[0,a.length].concat(n.call(g.filter(function(t){return null!=t})))),j=0,m=[],v=0,b=($=a).length;b>v;++v)U=v,_=$[v],U>0&&_.indent?(I=a[j],q=(y=I.children)!=null?y:I.children=[],q.push(_),m.push(null)):(j=U,m.push(_));return M=m,M=M.filter(function(t){return null!=t}),M=M.map(function(t){var e,n;return t.children&&(t.expand=(e=(n=t.opts)!=null?n.expand:void 0)!=null?e:t.children.length<5),t}),l.splice.apply(l,[0,l.length].concat(n.call(M))),c.folderTitle=h,u(a)}):u(a)}}})})}.call(this),function(){angular.element(document).ready(function(){return angular.bootstrap(document,["app"])})}.call(this);